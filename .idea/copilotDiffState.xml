<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/younesbouhouche/musicplayer/core/domain/CustomMediaNotificationProvider.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/younesbouhouche/musicplayer/core/domain/CustomMediaNotificationProvider.kt" />
              <option name="originalContent" value="package younesbouhouche.musicplayer.core.domain&#10;&#10;import android.app.Notification&#10;import android.app.NotificationChannel&#10;import android.app.NotificationManager&#10;import android.content.Context&#10;import android.os.Build&#10;import androidx.core.app.NotificationCompat&#10;import androidx.media3.common.Player&#10;import androidx.media3.common.util.UnstableApi&#10;import androidx.media3.session.CommandButton&#10;import androidx.media3.session.DefaultMediaNotificationProvider&#10;import androidx.media3.session.MediaNotification&#10;import androidx.media3.session.MediaSession&#10;import com.google.common.collect.ImmutableList&#10;import younesbouhouche.musicplayer.R&#10;&#10;@UnstableApi&#10;class CustomMediaNotificationProvider(context: Context) : DefaultMediaNotificationProvider(context) {&#10;&#10;    companion object {&#10;        const val NOTIFICATION_ID = 1&#10;        const val CHANNEL_ID = &quot;music_playback_channel&quot;&#10;    }&#10;&#10;    init {&#10;        createNotificationChannel(context)&#10;    }&#10;&#10;    private fun createNotificationChannel(context: Context) {&#10;        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {&#10;            val channel = NotificationChannel(&#10;                CHANNEL_ID,&#10;                &quot;Music Playback&quot;,&#10;                NotificationManager.IMPORTANCE_LOW&#10;            ).apply {&#10;                description = &quot;Shows currently playing music&quot;&#10;                setShowBadge(false)&#10;            }&#10;            val notificationManager = context.getSystemService(NotificationManager::class.java)&#10;            notificationManager.createNotificationChannel(channel)&#10;        }&#10;    }&#10;&#10;    fun ensureForeground(service: androidx.media3.session.MediaSessionService) {&#10;        val notification = createPlaceholderNotification(service)&#10;        service.startForeground(NOTIFICATION_ID, notification)&#10;    }&#10;&#10;    private fun createPlaceholderNotification(context: Context): Notification {&#10;        return NotificationCompat.Builder(context, CHANNEL_ID)&#10;            .setContentTitle(&quot;Music Player&quot;)&#10;            .setContentText(&quot;Loading...&quot;)&#10;            .setSmallIcon(R.drawable.media3_notification_small_icon)&#10;            .setPriority(NotificationCompat.PRIORITY_LOW)&#10;            .setOngoing(true)&#10;            .build()&#10;    }&#10;&#10;    override fun getMediaButtons(&#10;        session: MediaSession,&#10;        playerCommands: Player.Commands,&#10;        mediaButtonPreferences: ImmutableList&lt;CommandButton&gt;,&#10;        showPauseButton: Boolean&#10;    ): ImmutableList&lt;CommandButton&gt; {&#10;        val playPauseButton = mediaButtonPreferences.find { button -&gt;&#10;            button.sessionCommand == null &amp;&amp;&#10;            (button.iconResId == androidx.media3.session.R.drawable.media3_icon_play ||&#10;             button.iconResId == androidx.media3.session.R.drawable.media3_icon_pause)&#10;        }&#10;&#10;        val previousButton = mediaButtonPreferences.find { button -&gt;&#10;            button.sessionCommand == null &amp;&amp;&#10;            button.iconResId == androidx.media3.session.R.drawable.media3_icon_previous&#10;        }&#10;&#10;        val nextButton = mediaButtonPreferences.find { button -&gt;&#10;            button.sessionCommand == null &amp;&amp;&#10;            button.iconResId == androidx.media3.session.R.drawable.media3_icon_next&#10;        }&#10;&#10;        return ImmutableList.builder&lt;CommandButton&gt;().apply {&#10;            if (previousButton != null) add(previousButton)&#10;            if (playPauseButton != null) add(playPauseButton)&#10;            if (nextButton != null) add(nextButton)&#10;            add(NotificationCustomCmdButton.REWIND_10S.commandButton)&#10;            add(NotificationCustomCmdButton.FORWARD_10S.commandButton)&#10;            add(NotificationCustomCmdButton.LOOP.commandButton)&#10;        }.build()&#10;    }&#10;&#10;    override fun addNotificationActions(&#10;        mediaSession: MediaSession,&#10;        mediaButtons: ImmutableList&lt;CommandButton&gt;,&#10;        builder: NotificationCompat.Builder,&#10;        actionFactory: MediaNotification.ActionFactory,&#10;    ): IntArray {&#10;        // Simply use our getMediaButtons implementation directly&#10;        val buttons = getMediaButtons(&#10;            mediaSession,&#10;            mediaSession.player.availableCommands,&#10;            mediaButtons,&#10;            !mediaSession.player.isPlaying&#10;        )&#10;&#10;        return super.addNotificationActions(&#10;            mediaSession,&#10;            buttons,&#10;            builder,&#10;            actionFactory&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package younesbouhouche.musicplayer.core.domain&#10;&#10;import android.app.Notification&#10;import android.app.NotificationChannel&#10;import android.app.NotificationManager&#10;import android.content.Context&#10;import android.os.Build&#10;import androidx.core.app.NotificationCompat&#10;import androidx.media3.common.Player&#10;import androidx.media3.common.util.UnstableApi&#10;import androidx.media3.session.CommandButton&#10;import androidx.media3.session.DefaultMediaNotificationProvider&#10;import androidx.media3.session.MediaNotification&#10;import androidx.media3.session.MediaSession&#10;import com.google.common.collect.ImmutableList&#10;import younesbouhouche.musicplayer.R&#10;&#10;@UnstableApi&#10;class CustomMediaNotificationProvider(context: Context) : DefaultMediaNotificationProvider(context) {&#10;&#10;    companion object {&#10;        const val NOTIFICATION_ID = 1&#10;        const val CHANNEL_ID = &quot;music_playback_channel&quot;&#10;    }&#10;&#10;    init {&#10;        createNotificationChannel(context)&#10;    }&#10;&#10;    private fun createNotificationChannel(context: Context) {&#10;        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {&#10;            val channel = NotificationChannel(&#10;                CHANNEL_ID,&#10;                &quot;Music Playback&quot;,&#10;                NotificationManager.IMPORTANCE_LOW&#10;            ).apply {&#10;                description = &quot;Shows currently playing music&quot;&#10;                setShowBadge(false)&#10;            }&#10;            val notificationManager = context.getSystemService(NotificationManager::class.java)&#10;            notificationManager.createNotificationChannel(channel)&#10;        }&#10;    }&#10;&#10;    fun ensureForeground(service: androidx.media3.session.MediaSessionService) {&#10;        val notification = createPlaceholderNotification(service)&#10;        service.startForeground(NOTIFICATION_ID, notification)&#10;    }&#10;&#10;    private fun createPlaceholderNotification(context: Context): Notification {&#10;        return NotificationCompat.Builder(context, CHANNEL_ID)&#10;            .setContentTitle(&quot;Music Player&quot;)&#10;            .setContentText(&quot;Loading...&quot;)&#10;            .setSmallIcon(R.drawable.media3_notification_small_icon)&#10;            .setPriority(NotificationCompat.PRIORITY_LOW)&#10;            .setOngoing(true)&#10;            .build()&#10;    }&#10;&#10;    override fun getMediaButtons(&#10;        session: MediaSession,&#10;        playerCommands: Player.Commands,&#10;        mediaButtonPreferences: ImmutableList&lt;CommandButton&gt;,&#10;        showPauseButton: Boolean&#10;    ): ImmutableList&lt;CommandButton&gt; {&#10;        val playPauseButton = mediaButtonPreferences.find { button -&gt;&#10;            button.sessionCommand == null &amp;&amp;&#10;            (button.iconResId == androidx.media3.session.R.drawable.media3_icon_play ||&#10;             button.iconResId == androidx.media3.session.R.drawable.media3_icon_pause)&#10;        }&#10;&#10;        val previousButton = mediaButtonPreferences.find { button -&gt;&#10;            button.sessionCommand == null &amp;&amp;&#10;            button.iconResId == androidx.media3.session.R.drawable.media3_icon_previous&#10;        }&#10;&#10;        val nextButton = mediaButtonPreferences.find { button -&gt;&#10;            button.sessionCommand == null &amp;&amp;&#10;            button.iconResId == androidx.media3.session.R.drawable.media3_icon_next&#10;        }&#10;&#10;        return ImmutableList.builder&lt;CommandButton&gt;().apply {&#10;            if (previousButton != null) add(previousButton)&#10;            if (playPauseButton != null) add(playPauseButton)&#10;            if (nextButton != null) add(nextButton)&#10;            add(NotificationCustomCmdButton.REWIND_10S.commandButton)&#10;            add(NotificationCustomCmdButton.FORWARD_10S.commandButton)&#10;            add(NotificationCustomCmdButton.LOOP.commandButton)&#10;        }.build()&#10;    }&#10;&#10;    override fun addNotificationActions(&#10;        mediaSession: MediaSession,&#10;        mediaButtons: ImmutableList&lt;CommandButton&gt;,&#10;        builder: NotificationCompat.Builder,&#10;        actionFactory: MediaNotification.ActionFactory,&#10;    ): IntArray {&#10;        // Simply use our getMediaButtons implementation directly&#10;        val buttons = getMediaButtons(&#10;            mediaSession,&#10;            mediaSession.player.availableCommands,&#10;            mediaButtons,&#10;            !mediaSession.player.isPlaying&#10;        )&#10;&#10;        return super.addNotificationActions(&#10;            mediaSession,&#10;            buttons,&#10;            builder,&#10;            actionFactory&#10;        )&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/younesbouhouche/musicplayer/dialog/data/DialogRepoImpl.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/younesbouhouche/musicplayer/dialog/data/DialogRepoImpl.kt" />
              <option name="originalContent" value="package younesbouhouche.musicplayer.dialog.data&#10;&#10;import android.content.ComponentName&#10;import android.content.ContentUris&#10;import android.content.Context&#10;import android.content.Intent&#10;import android.database.ContentObserver&#10;import android.media.MediaMetadataRetriever&#10;import android.net.Uri&#10;import android.os.Handler&#10;import android.os.Looper&#10;import android.provider.MediaStore&#10;import android.provider.Settings&#10;import androidx.core.content.ContextCompat&#10;import androidx.media3.common.MediaItem&#10;import androidx.media3.common.Player&#10;import androidx.media3.session.MediaController&#10;import androidx.media3.session.MediaSessionService&#10;import androidx.media3.session.SessionToken&#10;import com.google.common.util.concurrent.ListenableFuture&#10;import kotlinx.coroutines.CoroutineScope&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import younesbouhouche.musicplayer.core.domain.DialogService&#10;import younesbouhouche.musicplayer.core.domain.models.MusicCard&#10;import younesbouhouche.musicplayer.dialog.domain.DialogRepo&#10;import younesbouhouche.musicplayer.main.presentation.states.PlayState&#10;import younesbouhouche.musicplayer.main.presentation.states.PlayerState&#10;import younesbouhouche.musicplayer.main.presentation.viewmodel.Task&#10;&#10;class DialogRepoImpl(val context: Context): DialogRepo {&#10;    private val _card = MutableStateFlow&lt;MusicCard?&gt;(null)&#10;    private val _state = MutableStateFlow(PlayerState(loading = true))&#10;&#10;    private var controllerFuture: ListenableFuture&lt;MediaController&gt;&#10;    private lateinit var player: Player&#10;    private val observer =&#10;        object : ContentObserver(Handler(Looper.getMainLooper())) {&#10;        }&#10;&#10;    override fun getState(): StateFlow&lt;PlayerState&gt; = _state&#10;&#10;    override fun getCard(): StateFlow&lt;MusicCard?&gt; = _card&#10;&#10;    init {&#10;        context.contentResolver.registerContentObserver(&#10;            Settings.System.CONTENT_URI,&#10;            true,&#10;            observer,&#10;        )&#10;        val sessionToken =&#10;            SessionToken(context, ComponentName(context, DialogService::class.java))&#10;        context.startForegroundService(Intent(context, DialogService::class.java))&#10;        controllerFuture = MediaController.Builder(context, sessionToken).buildAsync()&#10;    }&#10;    protected fun finalize() {&#10;        context.contentResolver.unregisterContentObserver(observer)&#10;    }&#10;&#10;    override fun play(uri: Uri, scope: CoroutineScope) {&#10;        controllerFuture.addListener({&#10;            player = controllerFuture.get()&#10;            player.setMediaItem(MediaItem.fromUri(uri))&#10;            player.prepare()&#10;            player.play()&#10;            player.addListener(&#10;                object : Player.Listener {&#10;                    override fun onPlaybackStateChanged(playbackState: Int) {&#10;                        super.onPlaybackStateChanged(playbackState)&#10;                        _state.update {&#10;                            it.copy(loading = playbackState == Player.STATE_BUFFERING)&#10;                        }&#10;                    }&#10;&#10;                    override fun onIsPlayingChanged(isPlaying: Boolean) {&#10;                        super.onIsPlayingChanged(isPlaying)&#10;                        _state.update {&#10;                            it.copy(&#10;                                playState =&#10;                                if (isPlaying) {&#10;                                    PlayState.PLAYING&#10;                                } else {&#10;                                    PlayState.PAUSED&#10;                                },&#10;                            )&#10;                        }&#10;                    }&#10;                },&#10;            )&#10;            scope.launch {&#10;                Task().startRepeating(100L) {&#10;                    _state.update {&#10;                        it.copy(time = player.currentPosition)&#10;                    }&#10;                }&#10;            }&#10;        }, ContextCompat.getMainExecutor(context))&#10;        val cursor =&#10;            context.contentResolver.query(&#10;                uri,&#10;                arrayOf(&#10;                    MediaStore.Audio.Media._ID,&#10;                    MediaStore.Audio.Media.DISPLAY_NAME,&#10;                    MediaStore.Audio.Media.DURATION,&#10;                    MediaStore.Audio.Media.TITLE,&#10;                    MediaStore.Audio.Media.ALBUM_ID,&#10;                    MediaStore.Audio.Media.ALBUM,&#10;                    MediaStore.Audio.Media.ARTIST,&#10;                ),&#10;                null,&#10;                null,&#10;                null,&#10;            )&#10;        cursor?.use { crs -&gt;&#10;            crs.moveToFirst()&#10;            val idColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)&#10;            val durationColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)&#10;            val titleColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE)&#10;            val artistColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.ARTIST)&#10;            val albumIdColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)&#10;            val albumColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM)&#10;            val id = crs.getLong(idColumn)&#10;            val duration = crs.getLong(durationColumn)&#10;            val title = crs.getString(titleColumn)&#10;            val artist = crs.getString(artistColumn)&#10;            val albumId = crs.getLong(albumIdColumn)&#10;            val album = crs.getString(albumColumn)&#10;            val contentUri: Uri =&#10;                ContentUris.withAppendedId(&#10;                    MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,&#10;                    id,&#10;                )&#10;            _card.value =&#10;                MusicCard&#10;                    .Builder()&#10;                    .setContentUri(contentUri)&#10;                    .setId(id)&#10;                    .setTitle(title)&#10;                    .setArtist(artist)&#10;                    .setAlbum(album)&#10;                    .setAlbumId(albumId)&#10;                    .setDuration(duration)&#10;                    .build()&#10;        }&#10;        val cover =&#10;            with(MediaMetadataRetriever()) {&#10;                try {&#10;                    setDataSource(context, uri)&#10;                    embeddedPicture ?: ByteArray(0)&#10;                } catch (_: Exception) {&#10;                    ByteArray(0)&#10;                }&#10;            }&#10;        _card.value = _card.value?.copy(coverUri = null)&#10;    }&#10;&#10;    override fun seekTo(ms: Long) {&#10;        player.seekTo(ms)&#10;    }&#10;&#10;    override fun pauseResume() {&#10;        if (player.isPlaying) player.pause() else player.play()&#10;    }&#10;&#10;    override fun stop() {&#10;        player.stop()&#10;        player.release()&#10;    }&#10;}" />
              <option name="updatedContent" value="package younesbouhouche.musicplayer.dialog.data&#13;&#10;&#13;&#10;import android.content.ComponentName&#13;&#10;import android.content.ContentUris&#13;&#10;import android.content.Context&#13;&#10;import android.content.Intent&#13;&#10;import android.database.ContentObserver&#13;&#10;import android.media.MediaMetadataRetriever&#13;&#10;import android.net.Uri&#13;&#10;import android.os.Handler&#13;&#10;import android.os.Looper&#13;&#10;import android.provider.MediaStore&#13;&#10;import android.provider.Settings&#13;&#10;import androidx.core.content.ContextCompat&#13;&#10;import androidx.media3.common.MediaItem&#13;&#10;import androidx.media3.common.Player&#13;&#10;import androidx.media3.session.MediaController&#13;&#10;import androidx.media3.session.MediaSessionService&#13;&#10;import androidx.media3.session.SessionToken&#13;&#10;import com.google.common.util.concurrent.ListenableFuture&#13;&#10;import kotlinx.coroutines.CoroutineScope&#13;&#10;import kotlinx.coroutines.flow.MutableStateFlow&#13;&#10;import kotlinx.coroutines.flow.StateFlow&#13;&#10;import kotlinx.coroutines.flow.update&#13;&#10;import kotlinx.coroutines.launch&#13;&#10;import younesbouhouche.musicplayer.core.domain.DialogService&#13;&#10;import younesbouhouche.musicplayer.core.domain.models.MusicCard&#13;&#10;import younesbouhouche.musicplayer.dialog.domain.DialogRepo&#13;&#10;import younesbouhouche.musicplayer.main.presentation.states.PlayState&#13;&#10;import younesbouhouche.musicplayer.main.presentation.states.PlayerState&#13;&#10;import younesbouhouche.musicplayer.main.presentation.viewmodel.Task&#13;&#10;&#13;&#10;class DialogRepoImpl(val context: Context): DialogRepo {&#13;&#10;    private val _card = MutableStateFlow&lt;MusicCard?&gt;(null)&#13;&#10;    private val _state = MutableStateFlow(PlayerState(loading = true))&#13;&#10;&#13;&#10;    private var controllerFuture: ListenableFuture&lt;MediaController&gt;&#13;&#10;    private lateinit var player: Player&#13;&#10;    private val observer =&#13;&#10;        object : ContentObserver(Handler(Looper.getMainLooper())) {&#13;&#10;        }&#13;&#10;&#13;&#10;    override fun getState(): StateFlow&lt;PlayerState&gt; = _state&#13;&#10;&#13;&#10;    override fun getCard(): StateFlow&lt;MusicCard?&gt; = _card&#13;&#10;&#13;&#10;    init {&#13;&#10;        context.contentResolver.registerContentObserver(&#13;&#10;            Settings.System.CONTENT_URI,&#13;&#10;            true,&#13;&#10;            observer,&#13;&#10;        )&#13;&#10;        val sessionToken =&#10;            SessionToken(context, ComponentName(context, DialogService::class.java))&#10;        context.startForegroundService(Intent(context, DialogService::class.java))&#10;        controllerFuture = MediaController.Builder(context, sessionToken).buildAsync()&#13;&#10;    }&#13;&#10;    protected fun finalize() {&#13;&#10;        context.contentResolver.unregisterContentObserver(observer)&#13;&#10;    }&#13;&#10;&#13;&#10;    override fun play(uri: Uri, scope: CoroutineScope) {&#13;&#10;        controllerFuture.addListener({&#13;&#10;            player = controllerFuture.get()&#13;&#10;            player.setMediaItem(MediaItem.fromUri(uri))&#13;&#10;            player.prepare()&#13;&#10;            player.play()&#13;&#10;            player.addListener(&#13;&#10;                object : Player.Listener {&#13;&#10;                    override fun onPlaybackStateChanged(playbackState: Int) {&#13;&#10;                        super.onPlaybackStateChanged(playbackState)&#13;&#10;                        _state.update {&#13;&#10;                            it.copy(loading = playbackState == Player.STATE_BUFFERING)&#13;&#10;                        }&#13;&#10;                    }&#13;&#10;&#13;&#10;                    override fun onIsPlayingChanged(isPlaying: Boolean) {&#13;&#10;                        super.onIsPlayingChanged(isPlaying)&#13;&#10;                        _state.update {&#13;&#10;                            it.copy(&#13;&#10;                                playState =&#13;&#10;                                if (isPlaying) {&#13;&#10;                                    PlayState.PLAYING&#13;&#10;                                } else {&#13;&#10;                                    PlayState.PAUSED&#13;&#10;                                },&#13;&#10;                            )&#13;&#10;                        }&#13;&#10;                    }&#13;&#10;                },&#13;&#10;            )&#13;&#10;            scope.launch {&#13;&#10;                Task().startRepeating(100L) {&#13;&#10;                    _state.update {&#13;&#10;                        it.copy(time = player.currentPosition)&#13;&#10;                    }&#13;&#10;                }&#13;&#10;            }&#13;&#10;        }, ContextCompat.getMainExecutor(context))&#13;&#10;        val cursor =&#13;&#10;            context.contentResolver.query(&#13;&#10;                uri,&#13;&#10;                arrayOf(&#13;&#10;                    MediaStore.Audio.Media._ID,&#13;&#10;                    MediaStore.Audio.Media.DISPLAY_NAME,&#13;&#10;                    MediaStore.Audio.Media.DURATION,&#13;&#10;                    MediaStore.Audio.Media.TITLE,&#13;&#10;                    MediaStore.Audio.Media.ALBUM_ID,&#13;&#10;                    MediaStore.Audio.Media.ALBUM,&#13;&#10;                    MediaStore.Audio.Media.ARTIST,&#13;&#10;                ),&#13;&#10;                null,&#13;&#10;                null,&#13;&#10;                null,&#13;&#10;            )&#13;&#10;        cursor?.use { crs -&gt;&#13;&#10;            crs.moveToFirst()&#13;&#10;            val idColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)&#13;&#10;            val durationColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.DURATION)&#13;&#10;            val titleColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE)&#13;&#10;            val artistColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.ARTIST)&#13;&#10;            val albumIdColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM_ID)&#13;&#10;            val albumColumn = crs.getColumnIndexOrThrow(MediaStore.Audio.Media.ALBUM)&#13;&#10;            val id = crs.getLong(idColumn)&#13;&#10;            val duration = crs.getLong(durationColumn)&#13;&#10;            val title = crs.getString(titleColumn)&#13;&#10;            val artist = crs.getString(artistColumn)&#13;&#10;            val albumId = crs.getLong(albumIdColumn)&#13;&#10;            val album = crs.getString(albumColumn)&#13;&#10;            val contentUri: Uri =&#13;&#10;                ContentUris.withAppendedId(&#13;&#10;                    MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,&#13;&#10;                    id,&#13;&#10;                )&#13;&#10;            _card.value =&#13;&#10;                MusicCard&#13;&#10;                    .Builder()&#13;&#10;                    .setContentUri(contentUri)&#13;&#10;                    .setId(id)&#13;&#10;                    .setTitle(title)&#13;&#10;                    .setArtist(artist)&#13;&#10;                    .setAlbum(album)&#13;&#10;                    .setAlbumId(albumId)&#13;&#10;                    .setDuration(duration)&#13;&#10;                    .build()&#13;&#10;        }&#13;&#10;        val cover =&#13;&#10;            with(MediaMetadataRetriever()) {&#13;&#10;                try {&#13;&#10;                    setDataSource(context, uri)&#13;&#10;                    embeddedPicture ?: ByteArray(0)&#13;&#10;                } catch (_: Exception) {&#13;&#10;                    ByteArray(0)&#13;&#10;                }&#13;&#10;            }&#13;&#10;        _card.value = _card.value?.copy(coverUri = null)&#13;&#10;    }&#13;&#10;&#13;&#10;    override fun seekTo(ms: Long) {&#13;&#10;        player.seekTo(ms)&#13;&#10;    }&#13;&#10;&#13;&#10;    override fun pauseResume() {&#13;&#10;        if (player.isPlaying) player.pause() else player.play()&#13;&#10;    }&#13;&#10;&#13;&#10;    override fun stop() {&#13;&#10;        player.stop()&#13;&#10;        player.release()&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>